{% extends "base.html" %}
{% block title %}–ò—Å—Ç–æ—Ä–∏—è –ª–æ–≥–æ–≤{% endblock %}

{% block content %}
  <h2 class="mb-4">–ò—Å—Ç–æ—Ä–∏—è –ª–æ–≥–æ–≤</h2>

  {% if logs and logs|length > 0 %}
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead class="table-dark">
          <tr>
            <th scope="col">ID</th>
            <th scope="col">–í—Ä–µ–º—è</th>
            <th scope="col">–î–µ–π—Å—Ç–≤–∏–µ</th>
            <th scope="col">–•–æ—Å—Ç</th>
            <th scope="col">–°—Ç–∞—Ç—É—Å</th>
            <th scope="col" class="text-end">–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          {% for log in logs %}
          <tr>
            <td>{{ log[0] }}</td>
            <td>{{ log[1] }}</td>
            <td>{{ log[2] }}</td>
            <td>{{ log[3] }}</td>
            <td>
              {% if log[5] == "ok" %}
                <span class="badge bg-success">OK</span>
              {% elif log[5] == "warn" %}
                <span class="badge bg-warning text-dark">WARN</span>
              {% else %}
                <span class="badge bg-danger">ERROR</span>
              {% endif %}
            </td>
            <td class="text-end">
              <a href="{{ url_for('history_detail', log_id=log[0]) }}" class="btn btn-sm btn-outline-info">
                –î–µ—Ç–∞–ª–∏
              </a>
              <form action="{{ url_for('del_log_history', log_id=log[0]) }}" method="post" class="d-inline">
                <button type="submit" class="btn btn-sm btn-outline-danger"
                        onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ª–æ–≥ #{{ log[0] }}?')">
                  –£–¥–∞–ª–∏—Ç—å
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ª–æ–≥–æ–≤ -->
    <form action="{{ url_for('delete_history') }}" method="post" class="mt-3">
      <button type="submit" class="btn btn-danger"
              onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é?')">
        üóë –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –ª–æ–≥–∏
      </button>
    </form>

  {% else %}
    <div class="alert alert-info">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞.</div>
  {% endif %}

  <a href="{{ url_for('index') }}" class="btn btn-secondary mt-3">‚¨Ö –ù–∞–∑–∞–¥</a>
{% endblock %}